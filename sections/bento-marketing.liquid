{% comment %}
  Bento grid marketing section - Apple-inspired layout
{% endcomment %}

<section class="bento-section">
  <div class="container">
    <div class="bento-grid fade-in">
      {% for block in section.blocks %}
        {% assign grid_size = block.settings.grid_size | default: 'small' %}
        {% assign bg_color = block.settings.background_color | default: '#F5F5F7' %}
        {% assign text_color = block.settings.text_color | default: '#1D1D1F' %}

        <div
          class="bento-box {% if grid_size == 'large' %}bento-box--large{% endif %}"
          style="background-color: {{ bg_color }}; color: {{ text_color }};"
          {{ block.shopify_attributes }}
        >
          <div class="bento-content">
            <h4>{{ block.settings.heading }}</h4>
            <p>{{ block.settings.description }}</p>
          </div>

          {% comment %} Decorative element {% endcomment %}
          {% if block.settings.show_decoration %}
            <div class="bento-decoration"></div>
          {% endif %}

          {% comment %} Optional image {% endcomment %}
          {% if block.settings.image != blank %}
            <div class="bento-image">
              {{ block.settings.image | image_url: width: 600 | image_tag: loading: 'lazy' }}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% stylesheet %}
  .bento-section {
    padding: var(--section-spacing) 0;
    margin-bottom: var(--section-spacing);
    background: var(--color-background);
  }

  .bento-section .container {
    max-width: 80rem;
  }

  .bento-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    height: 600px;
    max-width: 100%;
    width: 100%;
  }

  .bento-box {
    background: var(--color-background-secondary);
    border-radius: var(--border-radius);
    padding: 40px;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    min-height: 288px;
    transition: transform 0.3s var(--transition-smooth);
  }

  .bento-box:hover {
    transform: translateY(-3px);
  }

  .bento-box--large {
    grid-column: span 2;
    border-radius: var(--border-radius);
  }

  .bento-content {
    position: relative;
    z-index: 2;
  }

  .bento-box h4 {
    font-size: 1.8rem;
    margin-bottom: 10px;
    font-weight: 600;
    line-height: 1.2;
  }

  .bento-box p {
    max-width: 80%;
    font-size: 1rem;
    line-height: 1.6;
    color: var(--color-text-secondary);
  }

  .bento-decoration {
    position: absolute;
    right: -50px;
    bottom: -50px;
    width: 300px;
    height: 300px;
    background: #e5e5e5;
    border-radius: 50%;
    opacity: 0.5;
    pointer-events: none;
  }

  .bento-image {
    position: absolute;
    top: 0;
    right: 0;
    width: 40%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 20px;
    opacity: 0.8;
  }

  .bento-image img {
    max-height: 80%;
    width: auto;
    object-fit: contain;
  }

  @media (max-width: 768px) {
    .bento-section {
      padding: 60px 0;
    }

    .bento-grid {
      grid-template-columns: 1fr;
      min-height: auto;
      gap: 24px;
    }

    .bento-box {
      min-height: 250px;
      padding: 30px;
    }

    .bento-box--large {
      grid-column: span 1;
    }

    .bento-box p {
      max-width: 90%;
      font-size: 0.95rem;
    }

    .bento-image {
      width: 100%;
      position: relative;
      height: auto;
      margin-top: 20px;
      justify-content: center;
      padding: 0;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Bento Marketing",
  "blocks": [
    {
      "type": "bento_box",
      "name": "Bento Box",
      "settings": [
        {
          "type": "select",
          "id": "grid_size",
          "label": "Grid size",
          "options": [
            {
              "value": "small",
              "label": "Small (1 column)"
            },
            {
              "value": "large",
              "label": "Large (2 columns)"
            }
          ],
          "default": "small"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Feature heading"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Feature description goes here."
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Background color",
          "default": "#F5F5F7"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text color",
          "default": "#1D1D1F"
        },
        {
          "type": "checkbox",
          "id": "show_decoration",
          "label": "Show decorative element",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Optional image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Bento Marketing",
      "blocks": [
        {
          "type": "bento_box",
          "settings": {
            "grid_size": "large",
            "heading": "Design Unibody.",
            "description": "Fini le plastique qui craque. Le châssis en aluminium anodisé dissipe la chaleur et élimine les vibrations parasites.",
            "background_color": "#F5F5F7",
            "show_decoration": true
          }
        },
        {
          "type": "bento_box",
          "settings": {
            "grid_size": "small",
            "heading": "Connexion éclair.",
            "description": "Bluetooth 5.3 ou USB-C. Connecté en 2 secondes chrono.",
            "background_color": "#F5F5F7"
          }
        },
        {
          "type": "bento_box",
          "settings": {
            "grid_size": "small",
            "heading": "Certifié partout.",
            "description": "Teams, Zoom, Meet. Il fonctionne avec tout votre écosystème.",
            "background_color": "#E8F2FF",
            "text_color": "#0071E3"
          }
        }
      ]
    }
  ]
}
{% endschema %}
